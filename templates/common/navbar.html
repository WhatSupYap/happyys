
<!-- 사이드바 -->
<div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    
    <a href="/">Home</a>
    <a href="/blog">Blog</a>
    {% comment %} <a href="#">Contact</a> {% endcomment %}
</div>

<!-- 오버레이 -->
<div id="overlay" class="overlay" onclick="closeNav()"></div>

<!-- 네비게이션바 -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom">
    <!-- 좌측영역 -->
    <div class="h-logo-area hstack mx-sm-3">
        <button class="btn btn-nav" onclick="openNav()">☰</button>
        <a class="ms-2" href="{% url 'index' %}">HAPPY<span class="ty">Y</span><span class="ts">S</span></a>
        {% if suburl %}
        <span class="line mx-sm-3">|</span>
        <a class="menu" href="{% url suburl %}">Blog</a>
        {% endif %}
    </div>
    <!-- 가운데 영역 -->
    <div class="nav-center align-items-center">
        <button type="button" class="btn btn-nav searchButton">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"></path>
            </svg>
            <span class="visually-hidden">Button</span>
        </button>
        <input type="text" id="searchText" class="form-control me-2 d-sm-inline" style="width: 300px;" placeholder="Search" aria-label="Search" value="{{ kw|default_if_none:'' }}">
        <form id="searchForm" method="get" action="{% url 'index' %}">
            <input type="hidden" id="kw" name="kw" value="{{ kw|default_if_none:'' }}">
            <input type="hidden" id="page" name="page" value="{{ page }}">
        </form>
    </div>
    <!-- 우측영역 -->
    <div class="hstack me-sm-3">
        <span class="line mx-sm-3">|</span>
        {% if user.is_authenticated %}
        <a class="btn btn-nav" href="{% url 'common:logout' %}">{{ user.nickname }} Sign Out</a>
        {% else %}
        <a class="btn btn-nav" href="{% url 'common:login' %}?next={{ request.path }}">Sign In/Up</a>
        {% endif %}
    </div>    
</nav>
<!-- 스크립트 --> 
<script>
    document.getElementById('searchText').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            var query = event.target.value;
            goSearch(query);
        }
    });

    document.querySelector('.searchButton').addEventListener('click', function() {
        var query = document.getElementById('searchText').value;
        goSearch(query);
    });

    function goSearch(kw, index=1)
    {
        var url = '/search?kw=' + encodeURIComponent(kw) + '&page=' + index;
        window.location.href = url;
    }
 </script>